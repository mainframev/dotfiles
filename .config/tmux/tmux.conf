set -g set-titles on
set-environment -g PATH "/opt/homebrew/bin:/bin:/usr/bin"

# mouse mode on
set -g mouse on
setw -g mode-keys vi

# Prefix
set -g prefix C-s
unbind C-b

set -as terminal-features ",*:RGB"
set -ag terminal-overrides ",xterm-256color:RGB"
set -g default-terminal 'tmux-256color'


# Start panes from 1
set  -g base-index 1
setw -g pane-base-index 1
set  -g renumber-windows on

# History and escape
set -g escape-time 0
set -g history-limit 10000

# Clipboard
set -g set-clipboard on

# Status position
set -g status-position top

# Kill pane and session
bind-key Q kill-pane
bind-key X kill-session

# set of plugins
set -g @tpm_plugins ' \
tmux-plugins/tpm \
fabioluciano/tmux-powerkit \
tmux-plugins/tmux-prefix-highlight \
tmux-plugins/tmux-pain-control \
tmux-plugins/tmux-copycat \
tmux-plugins/tmux-yank \
tmux-plugins/tmux-open \
tmux-plugins/tmux-resurrect \
tmux-plugins/tmux-continuum \
tmux-plugins/tmux-sensible \
christoomey/vim-tmux-navigator \
'

set -g pane-active-border-style bg=color0
set -g pane-border-style bg=color0
set-window-option -g window-active-style bg=terminal
set-window-option -g window-style bg=color0

# Key bindings
bind ^X lock-server
bind ^C new-window -c "$HOME"
# bind ^D detach
bind * list-clients

bind r command-prompt "rename-window %%"
bind R source-file ~/.config/tmux/tmux.conf; display "Reloaded"

set -g set-titles on
set -g set-titles-string '#S: #W'
setw -g automatic-rename

unbind '"'
unbind %

# splitting
bind-key | split-window -h
bind-key _ split-window -v

# window management
bind-key -r [ previous-window
bind-key -r ] next-window
bind-key -r < swap-window -t -1\; select-window -t -1
bind-key -r > swap-window -t +1\; select-window -t +1

# <prefix> ESC for copy mode
bind-key Escape copy-mode
set -sg escape-time 0

bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# resizing panes
bind-key -r H resize-pane -L 10
bind-key -r J resize-pane -D 5
bind-key -r K resize-pane -U 5
bind-key -r L resize-pane -R 10

bind-key -T copy-mode-vi v send-keys -X begin-selection

# Basic configuration
set -g @powerkit_plugins "datetime,battery,weather,netspeed,nowplaying,git"
set -g @powerkit_separator_style "slantup"
set -g @powerkit_edge_separator_style "slantup"

set -g @powerkit_theme "rose-pine"
set -g @powerkit_theme_variant "moon"
set -g @powerkit_status_position "top"
set -g @powerkit_status_order "windows,plugins"

set -g @powerkit_reload_config_key "C-R"
set -g @powerkit_keybinding_conflict_action "ignore"


# Network interface (auto-detect if not set)
set -g @powerkit_plugin_netspeed_interface "auto"

set -g @powerkit_plugin_netspeed_display "both"
set -g @powerkit_plugin_netspeed_separator " | "

set -g @powerkit_plugin_netspeed_icon "󰈀"
set -g @powerkit_plugin_netspeed_icon_upload "󰕒"
set -g @powerkit_plugin_netspeed_icon_download "󰇚"

set -g @powerkit_plugin_netspeed_cache_ttl "2"


# ressurect settings
set -g @resurrect-capture-pane-contents 'on'
set -g @continuum-restore 'on'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run -b '~/.tmux/plugins/tpm/tpm'
